<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="MVSR Python API Reference" href="api-reference.html" /><link rel="prev" title="MVSR C++ Reference" href="../cpp/api-reference.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Python API - mvsr documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme-overrides.css?v=b7ae5b88" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">mvsr  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">mvsr  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported Languages</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../cpp/index.html">C++ (Native)</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of C++ (Native)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cpp/api-reference.html">C++ Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">Python API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Python API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api-reference.html">Python API Reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../c/index.html">C API</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of C API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../c/api-reference.html">C API Reference</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/lang/python/index.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="python-api">
<h1>Python API<a class="headerlink" href="#python-api" title="Link to this heading">¶</a></h1>
<p>If you use this project to analyze you data, consider <a class="reference internal" href="#../../README.md#license-and-contribution"><span class="xref myst">citing our paper</span></a>.</p>
<p><a class="reference internal" href="#lang/python/examples/plot.py"><span class="xref myst"><img alt="Example for a multi-variant with synthetic data and custom interpolation." src="lang/python/lang/python/examples/example_plot.jpg" /> <code class="docutils literal notranslate"><span class="pre">lang/python/examples/plot.py</span></code></span></a></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>The easiest way is to use the provided, precompiled python packages from <a class="reference external" href="https://pypi.org/project/mvsr/"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyPI</span></code></a> using pip or uv.
Alternatively These packages are also available on the release page.
We provide these packages for all common systems, namely ARM (aarch64) and x86 (x86_64) for Linux, Windows and MacOS.</p>
<p>If your system is not supported, you will have to <a class="reference internal" href="#manual-builds"><span class="xref myst">build the library yourself</span></a>.
The only needed dependency is numpy (optionally matplotlib for convenient plotting).</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>There are two APIs, <code class="docutils literal notranslate"><span class="pre">mvsr</span></code> (high-level) and <code class="docutils literal notranslate"><span class="pre">libmvsr</span></code> (low-level).
The low-level API is not documented, but it closely resembles the exported C-API from the core library.
The direct usage of the low-level API is discouraged, the following documentation will focus on the high-level API.</p>
<p>Mainly only one function (mvsr) is used.
The following snippet shows a minimal working example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mvsr</span><span class="w"> </span><span class="kn">import</span> <span class="n">mvsr</span>

<span class="n">regression</span> <span class="o">=</span> <span class="n">mvsr</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>   <span class="c1"># predictor values (x) of samples (one dimension)</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>   <span class="c1"># response values (y) of samples (one variant)</span>
    <span class="mi">2</span>                <span class="c1"># number of desired segments (k)</span>
<span class="p">)</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">regression</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>       <span class="c1"># calculate predicted response value at x=4.5,</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;f(4.5) = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>    <span class="c1"># should be 7.5</span>
                                        
<span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">regression</span><span class="p">:</span>              <span class="c1"># iterate over segments</span>

    <span class="p">(</span><span class="n">x_start</span><span class="p">,</span> <span class="n">x_end</span><span class="p">)</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">range</span>    <span class="c1"># get the x range of the segment</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Segment in range </span><span class="si">{</span><span class="n">x_start</span><span class="si">}</span><span class="s1"> &lt;= x &lt;= </span><span class="si">{</span><span class="n">x_end</span><span class="si">}</span><span class="s1">:&#39;</span><span class="p">)</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">segment</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>                    <span class="c1"># calculate what this segment would</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  f_seg(4.5) = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>        <span class="c1"># predict for x = 4.5 prints(4.5 and 7.5)</span>

</pre></div>
</div>
<p>The mvsr function computes the piecewise predictor function and returns a Regression object to access this information.
It enables iterating over segments, iterating over variants, predicting values for other predictor values and also easy pretty plotting, using matplotlib.</p>
<section id="api-reference">
<h3><a class="reference internal" href="api-reference.html"><span class="std std-doc">API Reference</span></a><a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h3>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h3>
<p>This is a short formal description of the interactions of all functions parameters to the main function.
The first three arguments were already used in the last snipped: the predictor values (x), the response values (y) and the desired amount of segments (k).</p>
<section id="predictor-values-x">
<h4>Predictor Values <code class="docutils literal notranslate"><span class="pre">x</span></code><a class="headerlink" href="#predictor-values-x" title="Link to this heading">¶</a></h4>
<p>This is always a sorted list of predictor values of an arbitrary type.
These values are preprocessed by a kernel object.
By default the <code class="docutils literal notranslate"><span class="pre">Poly</span></code> kernel is used to enable piecewise linear regression.
This behavior can be changed by changing the kernel to <code class="docutils literal notranslate"><span class="pre">Poly(0)</span></code> (piecewise constant), <code class="docutils literal notranslate"><span class="pre">Poly(d)</span></code> (piecewise polynomial of degree <code class="docutils literal notranslate"><span class="pre">d</span></code>) or <code class="docutils literal notranslate"><span class="pre">Raw</span></code> (provide your own Vandermonde-Matrix).
You can even provide a <a class="reference internal" href="#custom-kernel"><span class="xref myst">custom kernel</span></a> by yourself.</p>
<p>The Poly Kernel also supports multiple input dimensions.
This is achieved by supplying an iterable type (e.g. a list) for each input sample.
Notice that some functionality (e.g. calculating a response value) relies on being able to compare the predictor values.
If you do not want to implement a comparison function for you type, consider using the sortkey parameter.</p>
</section>
<section id="response-values-y">
<h4>Response Values <code class="docutils literal notranslate"><span class="pre">y</span></code><a class="headerlink" href="#response-values-y" title="Link to this heading">¶</a></h4>
<p>This parameter is an iterable (e.g. a list) of numbers.
There must be exactly one response value for each predictor value.</p>
<p>It is also possible to provide a list of response value lists.
All these response value lists must contain the same amount of values.
This results in a mulit-variant segmented regression (in simple terms, there are multiple response values for every single predictor value, see the <a class="reference internal" href="#examples/plot.py"><span class="xref myst">plotting example</span></a>).
All variants share the same breakpoints, i.e. their segments start and end at the same positions.
If the variants should not share the breakpoint positions, it is recommended to conduct a dedicated segmented regression for each variant.</p>
</section>
<section id="segment-count-k">
<h4>Segment Count <code class="docutils literal notranslate"><span class="pre">k</span></code><a class="headerlink" href="#segment-count-k" title="Link to this heading">¶</a></h4>
<p>The amount of desired output segments.
Future versions will enable automatic deduction of this parameter.</p>
</section>
<section id="named-parameters">
<h4>Named Parameters<a class="headerlink" href="#named-parameters" title="Link to this heading">¶</a></h4>
<p>Named parameters must be provided by their names directly.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">kernel</span></code></strong><br>
This enables to use an own kernel object.
Its <code class="docutils literal notranslate"><span class="pre">model_interpolation</span></code> parameter also enables tweaking the behavior in between the segments (see <a class="reference internal" href="#interpolation"><span class="xref myst">Interpolation</span></a>).</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">algorithm</span></code></strong><br>
This defines how the regression algorithm works.
There are two options, a very fast and accurate heuristic (<code class="docutils literal notranslate"><span class="pre">Algorithm.GREEDY</span></code>) and a dynamic program (<code class="docutils literal notranslate"><span class="pre">Algorithm.DP</span></code>).
Most of the time the heuristic is recommended, especially for large sample sets, since its accuracy increases in these cases.
However, the dynamic program guarantees to find the solution with the smallest error relative to the provided sample set.
In some use cases with few samples this can be worth the high resource consumption.
Notice that compute time and amount of memory needed for DP scale much worse with a growing number of samples.
If not amount of samples, but the compute time is the limiting factor, we <em>always</em> recommend using more samples with the greedy approach instead of less samples with the dynamic program.
For an in-depth analysis and an explanation of the algorithms see <a class="reference internal" href="#../../README.md#license-and-contribution"><span class="xref myst">our research paper</span></a>.
Per default the algorithm is chosen based on the number of input samples, effective input dimensions, and the desired amount segments.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">score</span></code></strong><br>
This parameter defines how the amount of segments is determined, if [parameter k](#Segment Count) is not uniquely defined.
It is not yet supported.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">normalize</span></code></strong><br>
Defines whether the data is normalized (see feature scaling).
If True, min-max normalization is performed on the response values before the regression is calculated.
The resulting regression models are denormalized in the result, making this process completely transparent.
This option is recommended if multiple variants are used, by default it is only enabled for mult-variant regression.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">weighting</span></code></strong><br>
This parameter is an iterable type, containing as many values as there are variants (output dimensions).
It multiplies the response values with the corresponding weight after normalization (if applied).
As a result, minimizing the error of a variant with a higher weight becomes more important.
The placement of the breakpoints depends more heavily on the variants with higher weights.
The resulting models are <em>unweighted</em>, making this process transparent, similar to normalization.
It is not recommended to apply weighting without normalization.
By default weighting for every variant is <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">dtype</span></code></strong><br>
A numpy type for the underlying regression calculation.
Currently we support <code class="docutils literal notranslate"><span class="pre">numpy.float32</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.float64</span></code>.
These two types are the only two exported by the underlying C-API at this point in time.
Depending on your hardware <code class="docutils literal notranslate"><span class="pre">numpy.float32</span></code> can be faster, but is less accurate.
If you want to use a custom type for the underlying calculation, consider using the low-level C++ API directly.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">keepdims</span></code></strong><br>
Defines whether an array will be returned as a response value if only one variant is in use.
It can be useful when doing additional calculations with the response value(s).
Notice that this value will internally be always set to <code class="docutils literal notranslate"><span class="pre">False</span></code> if you use the <code class="docutils literal notranslate"><span class="pre">Regression.variants</span></code> property, since the resulting objects can never contain multiple variants.
By default this parameter is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">sortkey</span></code></strong><br>
A callable (e.g. a function) taking one predictor value as an input.
It is used to be able to handle complex, non-comparable types as predictor values.
The function must return a value that can be compared.
This is necessary in order to determine which segment a predictor value belongs to.
The <a class="reference internal" href="#predictor-values-x"><span class="xref myst">predictor value list</span></a> must also be in sorted order relative to the resulting key, otherwise the behavior is undefined.
By default this value is <code class="docutils literal notranslate"><span class="pre">None</span></code> and behaves as if the input value is returned.</p>
</section>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Link to this heading">¶</a></h2>
<p>In order to implement custom data preprocessing, it is necessary to understand the order of the processing steps.
The graphic below displays this dataflow.</p>
<pre  class="mermaid">
        flowchart TD;
    X[&quot;X (Predictors)&quot;]--&gt;Regression;
    X--&gt;Preprocessing--&gt;LibMvsr[&quot;**LibMvsr**&quot;];
    Y[&quot;Y (Responses)&quot;]--&gt;Regression;

    Y--&gt;YNorm;
    subgraph KO[&quot;Kernel Object&quot;];
    subgraph MV[&quot;Multivariant Operation&quot;];
    YNorm[Variant Normalization]--&gt;YWeighting[&quot;Variant Weighting&quot;];
    Unweighting[&quot;Variant Unweighting&quot;]--&gt;Denorm[&quot;Variant Denormalization&quot;];
    end
    Preprocessing;
    Preprocessing2[&quot;Preprocessing&quot;];
    Interpolation;
    end

    LibMvsr--&gt;Breakpoints--&gt;Regression;
    LibMvsr--&gt;Models--&gt;Unweighting;
    Denorm--&gt;Regression;
    YWeighting--&gt;LibMvsr;

    Regression--&gt;|predict| Preprocessing2--&gt;|between segments| Interpolation--&gt;Segment;
    Preprocessing2--&gt;|within segment| Segment;
    </pre><section id="interpolation">
<h3>Interpolation<a class="headerlink" href="#interpolation" title="Link to this heading">¶</a></h3>
<p>Predicting useful values between segments depends on many attributes, like the used data type, data source, continuity of the function at the breakpoint, etc.
To enable a higher level of versatility, the implemented kernels implement a default interpolation functionality.
The <code class="docutils literal notranslate"><span class="pre">model_interpolation</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">Kernel.Raw</span></code> objects is a function with two input parameters, a single predictor value and a list of (normally two) neighboring segments.
The return value of this function should be a list defining a weighting value for each of the input segments at the given predictor value.
Normally these values should add up to 1.0.
The following functions are already implemented:</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Interpolate.closest</span></code></strong><br>
This is the default behavior for Raw Kernels.
It always uses the segment that is closest to the predictor value.
To determine the closest segment, the Euclidean distance to all samples is measured, and the segment of the closest sample is used.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Interpolate.left</span></code></strong><br>
This function always uses the left segment until the next one begins.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Interpolate.right</span></code></strong><br>
This function always uses the right segment until the next one begins.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Interpolate.linear</span></code></strong><br>
This function implements lerping between between two segment models.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Interpolate.smooth</span></code></strong><br>
This is a typical function for continuous transition between two segments.
It is based on a cubic function ($3x^2-2x^3$) and is comparable to known ease-in, ease-out smoothing functions.
It is similar to linear interpolation (lerp), but less harsh at the edges of the segments.</p>
<p>You can also provide an own function.
This is demonstrated in the <a class="reference internal" href="#examples/plot.py"><span class="xref myst">plotting example</span></a>.</p>
<p>Notice, that the Poly kernel is also able to use a <code class="docutils literal notranslate"><span class="pre">model_interpolation</span></code> function, but by default will instead linearly interpolate between the last sample of the previous segment and the first sample of the next one.
Such functionality can be implemented with a custom kernel.</p>
</section>
<section id="custom-kernel">
<h3>Custom Kernel<a class="headerlink" href="#custom-kernel" title="Link to this heading">¶</a></h3>
<p>There are multiple use cases to implement an own Kernel.
For example:</p>
<ol class="arabic simple">
<li><p>Special predictor value data type:
If you use a data type that can not easily be extended, needs special preprocessing or can not be assigned a suitable sortkey function, you can implement your own data preprocessing.</p></li>
<li><p>Custom normalization:
If you need a special form of normalization, you can implement your own <code class="docutils literal notranslate"><span class="pre">normalize</span></code> and <code class="docutils literal notranslate"><span class="pre">denormalize</span></code> functions.</p></li>
<li><p>Custom interpolation:
If a special form of interpolation is needed for you use case, which is not achievable with a <code class="docutils literal notranslate"><span class="pre">model_interpolate</span></code> function, you can provide an own <code class="docutils literal notranslate"><span class="pre">interpolate</span></code> function.
This is e.g. done by the Poly Kernel to enable linear interpolation between two samples.</p></li>
</ol>
<p>If you decide to implement your own kernel function, it is strongly recommended to inherit an existing kernel.
The Poly kernel is itself inheriting the behavior of the Raw kernel.
This enables reusing the existing features.</p>
<p>The Raw kernel implements the model interpolation functionality (by passing through the <code class="docutils literal notranslate"><span class="pre">model_interpolation</span></code> parameter), min-max normalization and denormalization (by defining the x-dimension that is subject to translation, in addition to the scaling), and preprocessing of a Vandermonde matrix.
The Poly kernel additionally implements data preprocessing for polynomial regression and a special interpolation between the samples.</p>
</section>
</section>
<section id="manual-builds">
<h2>Manual Builds<a class="headerlink" href="#manual-builds" title="Link to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api-reference.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">MVSR Python API Reference</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../cpp/api-reference.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">MVSR C++ Reference</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Ansgar Lößer, Max Schlecht
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Python API</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#api-reference"><span class="xref myst">API Reference</span></a></li>
<li><a class="reference internal" href="#parameters">Parameters</a><ul>
<li><a class="reference internal" href="#predictor-values-x">Predictor Values <code class="docutils literal notranslate"><span class="pre">x</span></code></a></li>
<li><a class="reference internal" href="#response-values-y">Response Values <code class="docutils literal notranslate"><span class="pre">y</span></code></a></li>
<li><a class="reference internal" href="#segment-count-k">Segment Count <code class="docutils literal notranslate"><span class="pre">k</span></code></a></li>
<li><a class="reference internal" href="#named-parameters">Named Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-usage">Advanced Usage</a><ul>
<li><a class="reference internal" href="#interpolation">Interpolation</a></li>
<li><a class="reference internal" href="#custom-kernel">Custom Kernel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manual-builds">Manual Builds</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>
    </body>
</html>